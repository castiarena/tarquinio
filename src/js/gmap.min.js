function Dependencie(e,o){var t=o,n=this;n.config={type:t.type||"script",elementString:t.elementString||"head",api:t?{key:t.api.key,search:t.api.search||"KEY"}:null,url:e,id:t.name||(new Date).getTime()+"-dependencie"},function(){n.insert()}()}var geo={get:function(e,o){return this[e](o)},position:function(e){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(e.onSuccess);else{if(!e.onError||"function"!=typeof e.onError)throw new Error("You don`t send an action to error on geolocation");e.onError()}}};Dependencie.prototype.insert=function(){var e=this,o=document.createElement(e.config.type);o.id=e.config.id,o.src=null!==e.config.api?e.config.url.replace(e.config.api.search,e.config.api.key):e.config.url,document.getElementsByTagName(e.config.elementString)[0].appendChild(o)},Dependencie.prototype.remove=function(){var e=this,o=document.getElementById(e.config.id);document.getElementsByTagName(e.config.elementString)[0].removeChild(o)};var GMap=function(e){var o=this;o.config=e,o.geolocation=e.geolocation||!1,o.libraries=e.libraries||null,o.doc=document,o.map=null,o.position=o.config.position||null,o.markers={},o.peremeters={},o.dependencie=null,o.dependencies(),o.doc.initGmap=function(){o.init()}};GMap.prototype.init=function(){var e=this;if(e.geolocation&&null===e.position)geo.get("position",{onSuccess:function(o){e.position={lat:o.coords.latitude,lng:o.coords.longitude},e.createMap()}});else{if(null===e.position)throw new Error("Must set a position");e.createMap()}},GMap.prototype.createMap=function(){var e=this;e.map=new google.maps.Map(e.el(),{center:e.position,zoom:16,mapTypeControl:!1,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"transit.station",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{visibility:"off"}]}]}),e.setMarker("user",e.position)},GMap.prototype.setMarker=function(e,o){var t=this;t.markers[e]=new google.maps.Marker({position:o,map:t.map})},GMap.prototype.setPeremeter=function(e,o){var t=this;t.peremeters[e]=new google.maps.Circle({center:o,radius:800,strokeColor:"#333",strokeOpacity:.5,strokeWeight:1,fillColor:"#333",fillOpacity:.15,map:t.map})},GMap.prototype.el=function(){var e=this;return e.doc.getElementById(e.config.content)},GMap.prototype.dependencies=function(){var e=this;e.dependencie=new Dependencie("https://maps.googleapis.com/maps/api/js?key=|KEY|&callback=document.initGmap",{api:{search:"|KEY|",key:e.config.api}})},GMap.prototype.events=function(){};